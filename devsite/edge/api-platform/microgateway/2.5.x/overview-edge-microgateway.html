  {% extends "_base.html" %} {% block title %}Overview of Edge Microgateway{% endblock %} {% block body %}

  <p style="text-align: right;"><em>Edge Microgateway v. 2.5.x</em></p>

  <p>Apigee Edge Microgateway is a secure, HTTP-based message processor for APIs. Its main job is
  to process requests and responses to and from backend services securely while asynchronously
  pushing valuable API execution data to Apigee Edge where it is consumed by the Edge Analytics
  system. Edge Microgateway is easy to install and deploy -- you can have an instance up and
  running within minutes.</p>

  <p>Typically, Edge Microgateway is installed within a trusted network in close proximity to
  backend target services. It provides enterprise-grade security, and some key plugin features such
  as spike arrest, quota, and analytics, but not the full capabilities or footprint of Apigee Edge.
  You can install Edge Microgateway  in the same data center or even on the same machine as
  your backend services if you wish.</p>

<p>You can run Edge Microgateway as a standalone process or run it in a Docker container. See
  <a href="api-platform/microgateway/2.5.x/docker">Using Docker with Edge Microgateway</a>.
  You can also use Edge Microgateway to provide Apigee API management for services running in a <a href="https://kubernetes.io/docs/home">Kubernetes</a> cluster.
  Whether you are migrating existing services and APIs to the Kubernetes stack or are creating new services
  and APIs, Edge Microgateway helps provide a clean API management experience that includes security,
  traffic management, analytics, publishing, and more. See
      <a href="api-platform/integrations/kubernetes/k8s-introduction">
        Integrate Edge Microgateway with Kubernetes</a>.</p>

  <h2 id="primaryusecases">Typical use cases</h2>

  <p>Typical use cases for a hybrid Cloud API management solution such as Edge Microgateway
  include:</p>

  <ul>
    <li>
      Reduce latency of API traffic for services that run in close proximity. For example, if
      your API consumers and producers are in close proximity, you do not necessarily want APIs to
      go through a central gateway.
    </li>

    <li>Keep API traffic within the enterprise-approved boundaries for security or compliance
    purposes.</li>

    <li>Continue processing messages if internet connection is temporarily lost.</li>

    <li>Provide Apigee API management for services running in a Kubernetes cluster. See
      <a href="api-platform/integrations/kubernetes/k8s-introduction">
Integrate Edge Microgateway with Kubernetes</a>.</li>
  </ul>
    <p>For additional use cases, see this <a href=
    "https://community.apigee.com/questions/16727/what-do-you-think-use-cases-are-for-hybrid-deploym.html">
    Apigee Community</a> article.</p>


  <h2 id="keyfeaturesandbenefits">Key features and benefits</h2>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Benefits</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Security</td>
      <td>Edge Microgateway authenticates requests with a signed
      access token or API key issued to each client app by Apigee Edge.</td>
    </tr>
    <tr>
      <td>Rapid deployment</td>
      <td>Unlike a full deployment of Apigee Edge, you can
      deploy and run an instance of Edge Microgateway within a matter of minutes.</td>
    </tr>
    <tr>
      <td>Network proximity</td>
      <td>You can install and manage Edge Microgateway in
      the same machine, subnet, or data center as the backend target APIs with which Edge
      Microgateway interacts.</td>
    </tr>
    <tr>
      <td>Analytics</td>
      <td>Edge Microgateway asynchronously delivers API execution
      data to Apigee Edge, where it is processed by the Edge Analytics system. You can use the full
      suite of Edge Analytics metrics, dashboards, and APIs.</td>
    </tr>
    <tr>
      <td>Reduced latency</td>
      <td>All communication with Apigee Edge is asynchronous
      and does not happen as part of processing client API requests. This allows Edge Microgateway to
      collect API data and send it to Apigee Edge without affecting latency.</td>
    </tr>
    <tr>
      <td>Familiarity</td>
      <td>Edge Microgateway uses and interacts with Apigee Edge
      features that Edge administrators already understand well, such as proxies, products, and
      developer apps.</td>
    </tr>
    <tr>
      <td>Configuration</td>
      <td>No programming is required to set up and manage Edge
      Microgateway. Everything is handled through configuration.</td>
    </tr>
    <tr>
      <td>Convenience</td>
      <td>You can integrate Edge Microgateway with your existing
      application monitoring and management infrastructure and processes.</td>
    </tr>
      <td>Logging</td>
      <td>Log files detail all the normal and exceptional events
      encountered during API processing by Edge Microgateway.</td>
    </tr>
    <tr>
      <td>CLI</td>
      <td>A command-line interface lets you start, stop, and restart Edge
      Microgateway, extract operating statistics, view log files, request access tokens, and
      more.</td>
    </tr>
  </tbody>
</table>



  <h2 id="whatyouneedtoknowaboutedgemicrogateway">What you need to know about Edge
  Microgateway</h2>

  <p>This section describes how Edge Microgateway works, its basic architecture, configuration, and
  deployment.</p>

  <h3 id="whatyouneedtoknowaboutedgemicrogateway-whyuseedgemicrogateway">Why use Edge
  Microgateway?</h3>

  <p>Moving the API management component close to backend target applications can reduce network
  latency. While you can install Apigee Edge on-premises in a private cloud, a full deployment of
  Apigee Edge is necessarily large and complex to support its full feature-set and data-heavy
  features like key management, monetization, and analytics. This means that deploying Apigee Edge
  on premises in each data-center is not always desirable.</p>

  <p>With Edge Microgateway, you get a relatively small footprint application running close to your
  backend applications. And, you get to leverage full Apigee Edge for analytics, security, and
  other features.</p>

  <h3 id="whatyouneedtoknowaboutedgemicrogateway-sampledeploymentscenarios">Sample deployment
  scenarios</h3>

  <p>This section illustrates several possible deployment scenarios for Edge Microgateway.</p>

  <p><strong>Same machine</strong></p>

  <p>Figure 1 shows the request processing path when Edge Microgateway is deployed in its most
  simple possible configuration, where Edge Microgateway and the backend target APIs are installed
  on the same machine. A single Edge Microgateway instance can be used to front multiple
  backend target applications</p>

  <p><strong>Figure 1:</strong> The most simple deployment of Edge Microgateway</p>

 <img alt="" src="/api-platform/images/Microgateway-Fig1.png" width="55%">



  <p><strong>Different machine</strong></p>

  <p>Because all the communication between clients, Edge Microgateway, and backend API
  implementations is HTTP, you can install Apigee Edge Microgateway on a different machine from the
  API implementation, as shown in Figure 2.</p>

  <p><strong>Figure 2:</strong> Edge Microgateway separated from backend target APIs</p>

  <img alt="" src="/api-platform/images/Microgateway-Fig2.png" width="60%">



  <p><strong>With load balancer</strong></p>

  <p>Edge Microgateway itself can be front-ended by a standard reverse proxy or load-balancer
  for SSL termination and/or load-balancing, as shown in Figure 3.</p>

  <p><strong>Figure 3:</strong> Running Edge Microgateway with a load balancer</p>

  <img alt="" src="/api-platform/images/Microgateway-Fig3d.png" width="65%">

  <p><strong>Intranet deployment</strong></p>

  <p>Use Edge Microgateway to protect intranet traffic while protecting internet traffic with
  Apigee Edge, as illustrated in Figure 4. Let's say an API endpoint <code>/orders</code> is
  proxied through Apigee Edge Cloud, and it hits the backend target
  <code>https://mycompany.com/orders</code>. This is represented by the target API implementation
  on the left. This API may then call multiple API endpoints represented by the target
  implementation on the right. For example, it may call internally <code>/customers</code> and
  <code>/transactions</code>. See also <a href=
  "https://community.apigee.com/questions/22172/microgateway-docs-query-internet-intranet-deployme.html">
  this post</a> on the Apigee Community. </p>

  <p><strong>Figure 4:</strong> Running Edge Microgateway to protect intranet traffic</p>

  <img alt="" src="/api-platform/images/Microgateway-Fig4.png" width="75%">



  <h3 id="whatyouneedtoknowaboutedgemicrogateway-dependencyonapigeeedge">Dependency on Apigee
  Edge</h3>

  <p>Edge Microgateway depends on and interacts with Apigee Edge. Edge Microgateway must
  communicate with Apigee Edge to function properly. The primary ways that Edge Microgateway interacts with
  Edge are:</p>

  <ul>
    <li>Upon startup, Edge Microgateway obtains a list of special "Edge Microgateway-aware" proxies
    and a list of all of the API products from your Apigee Edge organization. For each incoming client
    request, Edge Microgateway determines if the request matches one of these API proxies and then
    validates the incoming access token or API key based on the keys in the API product associated with
    that proxy.</li>

    <li>The Apigee Edge Analytics system stores and processes API data sent asynchronously from
    Edge Microgateway.</li>

    <li>Apigee Edge provides credentials used to sign access tokens or provide API keys that
    are required by clients making API calls through Edge Microgateway. You can obtain these tokens
    using a CLI command provided with Edge Microgateway.</li>
  </ul>

  <h3 id="whatyouneedtoknowaboutedgemicrogateway-onetimeconfiguration">One-time configuration</h3>

  <p>You must initially configure Edge Microgateway to be able to communicate with your Apigee Edge
  organization. On startup, Edge Microgateway initiates a bootstrapping operation with Apigee Edge.
   Edge Microgateway retrieves from Apigee Edge the information it requires to process API
  calls on its own, including the list of Edge Microgateway-aware proxies that are deployed on
  Apigee Edge. We'll talk more about these proxies shortly.</p>

  <p>Edge Microgateway does not have to be co-located with Apigee Edge; Apigee Edge public and
  private cloud offerings work equally well.</p>

  <h2 id=
  "whatyouneedtoknowaboutedgemicrogateway-whatyouneedtoknowaboutedgemicrogatewayawareproxies">
  <a id="What you need to know about Edge Microgateway-aware proxies" name=
  "What%20you%20need%20to%20know%20about%20Edge%20Microgateway-aware%20proxies"></a>What you need
  to know about Edge Microgateway-aware proxies</h2>

  <p>Edge Microgateway-aware proxies provide Edge Microgateway with certain information that allows
  it to process client API requests. Information about these proxies is downloaded from Apigee Edge
  to Edge Microgateway when Edge Microgateway starts up.</p>

  <p>It is up to you or your API team to create these proxies on Apigee Edge using the Apigee Edge
  management UI or through other means if you wish. It's easy to do, and we walk through the
  details in the <a href=
  "/api-platform/microgateway/2.5.x/setting-and-configuring-edge-microgateway.html">Setting up and
  configuring Edge Microgateway</a>.</p>

  <aside class="note"><b>Note:</b> Edge Microgateway-aware proxies must point to an HTTP target
  endpoint. In other words, the TargetEndpoint for the proxy must include an HTTPTargetConnection.
  Edge Microgateway is not designed to work with proxies that use the ScriptTarget or HostedTargets element to point
  to Node.js applications as backend targets. See also {{endpoint_properties_reference}}. </aside>

  <p>The characteristics of Edge Microgateway-aware proxies are:</p>

  <ul>
    <li>They provide Edge Microgateway with two key pieces of information: a base
    path and target URL.</li>

    <li>They must point to HTTP target endpoints. The backend target cannot be a
    Node.js app referenced by a ScriptTarget element in the TargetEndpoint definition. See the
    preceding note for more information. </li>

    <li>The proxy names must be prefixed with <code><strong>edgemicro_</strong></code>. For
    example: <strong><code>edgemicro_weather</code></strong>.</li>

    <li>You can't add policies or conditional flows to these proxies. If you try, they
    are ignored. Otherwise, Edge Microgateway-aware proxies appear in the Edge Management UI the same as any other
    API proxy on Edge.</li>

    <li>They can be bundled into products and associated with developer apps.</li>

    <li>Traffic data shows up in Edge Analytics.</li>

    <li>They cannot be traced using the Apigee Edge Trace tool.</li>
  </ul>

  <h2 id="whatyouneedtoknowaboutedgemicrogateway-moreaboutedgemicrogatewayandapigeeedgeanalytics">
  About Edge Microgateway and Apigee Edge Analytics</h2>

  <p>As API traffic flows through Edge Microgateway, Edge Microgateway buffers and asynchronously
  sends API execution data to Apigee Edge, where the data is stored and processed by the Edge
  Analytics system. This asynchronous communication allows Edge Microgateway to take advantage of
  Edge analytics features, while maintaining a relatively small footprint with minimal processing
  overhead or blocking. The full suite of Edge Analytics dashboards and custom reporting
  capabilities are available to you and your team to analyze traffic that passes through Edge
  Microgateway.</p>

  <p><strong>Figure 6:</strong> Proxy Traffic dashboard on Edge</p>

  <img alt="" src="/api-platform/images/em-admin-fig-6.png" width="90%">

  <p> For more information about Edge Analytics, see <a href=
  "/api-platform/analytics/analytics-dashboards.html">Analytics dashboards</a>.</p>

  <h2 id="whatyouneedtoknowaboutedgemicrogateway-aboutedgemicrogatewaysecurity">About Edge
  Microgateway security</h2>

  <h3>The role of Apigee Edge</h3>

  <p>As mentioned previously, Apigee Edge plays a role in securing all client requests to Edge
  Microgateway. The primary roles Apigee Edge plays are:</p>

  <ul>
    <li>Providing client credentials used as API keys or to generate valid access tokens used by
    clients to make secure API calls through Edge Microgateway.</li>

    <li>Providing credentials that Edge Microgateway needs to send API execution data to the Apigee
    Edge Analytics system. These credentials are obtained once by Edge Microgateway during the
    initial setup steps.</li>

    <li>Providing the platform for bundling API resources into products, registering and managing
    developers, and creating and managing developer apps.</li>
  </ul>

  <h3>Client app authentication</h3>

  <p>The Edge Microgateway supports client authentication through access tokens and API
    keys. Security keys and tokens are generated by Apigee Edge and validated by Edge
    Microgateway for each API call. If the OAuth plugin is enabled, Edge Microgateway checks a signed
    access token or API key and if it's valid, the API call proceeds to the backend target. If it isn't valid, an error is
    returned.</p>

    <p>See <a href=
    "/api-platform/microgateway/2.5.x/setting-and-configuring-edge-microgateway.html">Setting up
    and configuring Edge Microgateway</a> for steps needed to obtain and use access tokens and
    API keys.</p>

  <aside class="note"><b>Note:</b> Edge Microgateway cannot be used to invoke regular Apigee Edge
  API proxies, as explained in detail in the discussion of creating <a href=
  "/api-platform/microgateway/2.5.x/setting-and-configuring-edge-microgateway.html#part2createentitiesonapigeeedge">
  microgateway-aware proxies</a>. The OAuth2 access tokens that you obtain and use with Edge
  Microgateway are not the same as the access tokens issued by Edge and enforced by Edge through
  its native OAuthV2 policy. To use OAuth2 with Edge Microgateway you must follow the specific
  instructions provided in the topic <a href=
  "/api-platform/microgateway/2.5.x/setting-and-configuring-edge-microgateway.html#part4secureedgemicrogateway-secureapicallswithanoauth2accesstoken">
  Secure API calls with an OAuth2 access token</a>. </aside>

  <h3>Authentication of Edge Microgateway on Apigee Edge</h3>

    <p>The asynchronous calls Edge Microgateway makes to update analytics data on Apigee Edge
    require authentication. This authentication is provided through a public/secret key pair passed
    to Edge Microgateway through the CLI or using environment variables. You obtain and use these
    keys once when you first install and start up Edge Microgateway.</p>


  <h3>API product management platform</h3>


    <p>Edge serves as a platform for bundling API resources into products, registering and
    managing developers, and creating and managing developer apps. For example, just as you can
    create and bundle entities like products and developer apps for regular Apigee Edge proxies,
    you can do exactly the same for Edge Microgateway proxies. API-level security is made possible
    by generating public and private security keys for each "bundle." This mechanism is identical
    to the way API security works on Apigee Edge.</p>


  <h2 id=
  "whatyouneedtoknowaboutedgemicrogateway-canimovemyexistingedgeproxyimplementationstoedgemicrogateway">
  Can I move my existing Edge proxy implementations to Edge Microgateway?</h2>

  <p>You cannot migrate existing proxies with associated policies or conditional flows to Edge
  Microgateway. Edge Microgateway requires you to create new "microgateway-aware" proxies. These
  proxies must be named with a special prefix, edgemicro_. Upon startup, Edge Microgateway
  discovers these edgemicro_* proxies and downloads configuration information for each of them.
  This information includes their target URLs and resource paths. From that point on, the proxies
  are not used. Any policies or conditional flows in these proxies will never execute.</p>

  <p>Another reason for having microgateway-aware proxies is that Edge Microgateway asynchronously
  pushes analytics data to Edge for each microgateway-aware proxy. You can then view the analytics
  data for microgateway-aware proxies  just as you would for any other proxy in the Edge
  Analytics UI. </p>

  <p>The setup topic walks you through all the steps you need to do to begin proxying API calls
  through Edge Microgateway, including a few simple steps you need to do on Apigee Edge to set up a
  configuration that Edge Microgateway needs, including creation of microgateway-aware proxies.
   See <a href=
  "/api-platform/microgateway/2.5.x/setting-and-configuring-edge-microgateway.html">Setting up and
  configuring Edge Microgateway</a>.</p>


  <h2 id="learnmoreaboutedgemicrogateway">Learn more about Edge Microgateway</h2>

  <p>Apigee provides these resources:</p>

  <ul>
    <li>
      <p><a href="/api-platform/microgateway/edge-microgateway-home.html">Edge Microgateway
      Documentation</a> - The docs include an install guide and getting started tutorial, as well as complete reference
      and configuration information.</p>
    </li>

    <li>
      <p><a href="/api-platform/microgateway/edge-microgateway-videos">Videos</a> - The Apigee
      Four Minute Videos for Developers series includes a suite of episodes on Edge Microgateway.</p>
    </li>

    <li>
      <p><a href="https://community.apigee.com/spaces/71/index.html">Edge Micro forum</a> - The
      Edge Micro forum on the <a href="https://community.apigee.com/">Apigee Community</a> is a
      great place to ask questions and benefit from questions asked, and answered, by others.</p>
    </li>
  </ul>{% endblock %}
