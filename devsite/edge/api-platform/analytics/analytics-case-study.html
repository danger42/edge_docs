  {% extends "_base.html" %} {% block title %}Troubleshooting with analytics{% endblock %} {% block body %}

  <h2 id="troubleshootingaslowapi">Troubleshooting a slow API</h2>

  <p>Data visualization is an important <strong>troubleshooting</strong> tool. Apigee
  Edge is always collecting and analyzing data for your APIs, and visualization is the most
  powerful way to unlock, compare, contrast, and assess that data. </p>

  <p>So, let's say you've been hearing from customers (perhaps via support calls, social media
  sites, or user forums) that one of your APIs is slow. Visualization can help. Where do you
  begin?</p>

  <h3 id="troubleshootingaslowapi-considerandtestforpossiblecauses">Consider and test for possible
  causes</h3>

  <p>Possible causes might include:</p>

  <ul>
    <li>If the slowness being seen by just one app or is it from multiple apps? If one app, then it
    might be a problem with the app. </li>

    <li>If it being seen by multiple users across multiple apps and users seem to be in the same
    geo location, then it could be a network issue</li>

    <li>If you're not seeing either of these issue, it could be an issue with Apigee Edge. If you
    recently added  or updated a policy. It could be configured incorrectly.</li>

    <li>If the total response time is being reported as high, but the average endpoint response
    time has not changed then it might be an Apigee issue. If the average endpoint response time is
    also high then it could be an issue in the network between Apigee and the target server, or an
    internal application server.</li>
  </ul>

  <h3 id="troubleshootingaslowapi-visualizewhichapiisslow">Visualize which API is slow</h3>

  <p>To discover which API is underperforming, one approach is to compare the average response
  times of all your APIs to see if one of them is out of line. </p>

  <ol>
    <li>Select API Proxies from the APIs menu. </li>

    <li>In the Performance section of the API Proxies page, select Average Response Time from the
    Performance menu.</li>

    <li>Select a range of dates to evaluate. </li>

    <li>Select which APIs you wish to evaluate. </li>
  </ol>

  <p>In the plot, look for sudden spikes or gradual increases in response time. </p>

  <h3 id="troubleshootingaslowapi-visualizewithacustomreport">Visualize with a custom report</h3>

  <p>If you suspect which API is causing a problem, you can create a custom report that includes
  charts and plots comparing specific metrics that you select. For example, you can visualize the
  maximum latency time by app and resource. </p>

  <ol>
    <li>Select <strong>Custom Reports</strong> from the Analytics menu. </li>

    <li>In the Custom Reports page, click <strong>+ Custom Report</strong>. </li>

    <li>Fill out the Custom Report basics, select your sampling rate, and the environment you wish
    to test. </li>

    <li>In the Y-Axis Measures section, select Total Response Time and Max for the Aggregate
    Function:<br>
    <img alt="" src="/api-platform/images/Latency-custom-report2.png"></li>

    <li>Specify Drilldowns for the API Proxy and Request Path:<br>
    <strong><img src="/api-platform/images/Latency-custom-report3.png" width="349"></strong></li>
  </ol>

  <h3 id="troubleshootingaslowapi-analyzetheresultingreport">Analyze the resulting report</h3>

  <p>The new latency report will show you the response times by API and then by each resource
  within an API. By combining this information with what you know about your network architecture,
  you can quickly find issues that may be related to your infrastructure.</p>

  <h3 id="troubleshootingaslowapi-drilldown">Drill down</h3>

  <p>You can drill down on the worst performing API (the one with the highest latency). </p>

  <p><strong><img src="/api-platform/images/Latency-custom-report5.png" width="397"></strong></p>

  <h3 id="troubleshootingaslowapi-act">Act</h3>

  <p>Now that you know which resource is performing badly, you can examine your network to see if
  there's a service issue, or you can add a 3rd dimension like Developer App to see which apps are
  impacted by this slow resource, or developer to figure out which developers are impacted by the
  slow resource. </p>

  <p>As you can see, Edge Analytics Services includes multiple ways to approach a specific problem,
  and visualization plays an important role in any troubleshooting process. </p>{% endblock %}
