{% extends "_base.html" %}
{% block title %}Flow variables reference{% endblock %}
{% block body %}

<p>This section provides reference information about the flow variables.</p>

<p>Apigee Edge defines the following flow variables:</p>

{% include "includes/flow-variables/_all.html" %}

<p>Each of these variables is described in the sections that follow.</p>

<section class="expandable">
  <h3 class="showalways">Flow variable terminology</h3>
    <p>A <em>flow variable</em> refers to a value within a context. The value of a flow variable can be
    either a primitive type (such as a string, boolean, or integer) or a reference to a specific
    object, such as an object instantiated by Edge during request/response processing.</p>

    <p>Whether a flow variable refers to a primitive type or an object depends on the
    context&mdash;the time at which you refer to it. The <em>context</em> for a flow variable is the flow
    segment in which an API proxy processes a request/response. For example, in any segment of the
    response flow context, the <code>response</code> flow variable
    refers to the {{response_object}} object.</p>

    <p>In most cases, you can think of flow variables as referencing an object. To refer to properties
    of that object, you use dot notation. For example, to access the <code>content</code> property
    of <code>response</code>, use <code>response.content</code>.</p>
</section>


<!--
Policy specific objects:
messagelogging
-->

  <section class="expandable">
    <h3 class="showalways">Working with flow variables</h3>
      <p>For information on using flow variables, see
      <a href="/api-platform/fundamentals/introduction-flow-variables">Flow variables
      overview</a>.</p>
      <p>Keep the following in mind when working with flow variables:</p>
      <ul>
        <li>Each flow variable, such as <code>request</code>, has properties that you access using
          dot-notation syntax. For example:
          <pre class="prettyprint">request.headers.count</pre>
        </li>
        <li>Not all flow variables are accessible from all policies or tools (such as the
          {{trace}}). For example, in the request PreFlow, you won't be able to access the
          {{response_object}}.</li>
        <li>Most properties are read only. Where some are read/write, they might be read only, too,
          depending on where in the flow you access them.</li>
        <li>Some policies define <em>policy-specific</em> flow variables. For example, the
          {{response_cache_policy}} defines a <code>responsecache</code> variable. For more
          information, see the
          <a href="/api-platform/reference/policies/reference-overview-policy">policies reference</a>.
        </li>
        <li>Do not rely on undocumented variables in your API proxies and apps. For example, do not
          rely on the values in the undocumented X-Apigee.* headers in your API proxies as these
          headers are not intended for customer use and can be removed or changed by Apigee at any time. </li>
      </ul>
      <aside class="objective">
      <p>For more information, see:</p>
        <ul>
          <li><strong>Get started:</strong>
            <ul>
              <li><a href="/api-platform/fundamentals/introduction-flow-variables#whatareflowvariables">
                What are flow variables?</a></li>
              <li><a href="/api-platform/fundamentals/introduction-flow-variables#understandingflowvariablescope">
                Understanding flow variable scope</a></li>
              <li><a href="/api-platform/fundamentals/flow-configurations">Configuring
                flows</a></li>
            </ul>
          </li>
          <li><strong>Tools and policies:</strong>
            <ul>
              <li>The {{trace}} lets you see the values of flow variables as you step through the
                API proxy flow.</li>
              <li>The {{assign_message_policy}} lets you modify the variables in your API proxy
                flow.</li>
            </ul>
          </li>
        </ul>
      </aside>
  </section>

  <h2 id="apigee"><code>apigee</code></h2>
  <p>A helper variable that provides information about execution time of the policy.</p>
  <p>The following table describes the properties of the <code>apigee</code> variable:</p>

  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_apigee.html" %}
    </tbody>
  </table>

  <h2 id="apiproxy"><code>apiproxy</code></h2>
  <p>Describes the API proxy.</p>
  <p>The following table describes the properties of the <code>apiproxy</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_apiproxy.html" %}
    </tbody>
  </table>

  <p>For more information on working with API proxies, see
  <a href="/api-platform/fundamentals/understanding-apis-and-api-proxies">Understanding APIs and
  API proxies</a>.</p>

  <h2 id="application"><code>application</code></h2>
  <p>A container for the <code>application.basepath</code> property.</p>
  <p>The following table describes the properties of the <code>application</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_application.html" %}
    </tbody>
  </table>

  <h2 id="client"><code>client</code></h2>
  <p>The application or system that sent a request to the Edge router.</p>
  <p>The following table describes the properties of the <code>client</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_client.html" %}
    </tbody>
  </table>

  <h2 id="current"><code>current</code></h2>
  <p>Contains information about the current API proxy flow.</p>
  <p>The following table describes the properties of the <code>current</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_current.html" %}
    </tbody>
  </table>

  <p>You can view these properties in the Edge UI's Trace view. However, these properties are not
  visible by default in the Classic UI's Trace view.</p>

  <section class="expandable">
    <p class="showalways"><strong>To see the properties in the Classic UI:</strong></p>
    <ol>
      <li>Log in to the {{mgmt_ui}}.</li>
      <li>Select <strong>APIs &gt; API Proxies</strong>. The API Proxies list view is displayed.
      <li>Select your API Proxy to see the proxy's summary view. If you don't see your proxy in the
        list, be sure that you selected the right organization, as described in
        <a href="create-account#orgs">A word about organizations</a>.</li>
      <li>Click the <strong>Trace</strong> tab. The Trace view is displayed.</li>
      <li>Under <strong>View Options</strong>, enable the <strong>Show All FlowInfos</strong>
        checkbox, as the following example shows:
        <p><img src="/api-platform/images/showallfavorites-enable.png" class="screenshot" width="40%"/></p>
    </ol>
  </section>

  <h2 id="environment"><code>environment</code></h2>
  <p>A container for the <code>environment.name</code> property.</p>
  <p>The following table describes the properties of the <code>environment</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_environment.html" %}
    </tbody>
  </table>

  <h2 id="error"><code>error</code></h2>
  <p>A contextual object that represents an error message in the
  <a href="/api-platform/fundamentals/fault-handling">error flow</a>.</p>

  <aside class="note"><h3 class="hide-from-toc">NOTE</h3>Error variables are only available in the
  error flow.</aside>
  <p>The following table describes the properties of the <code>error</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_error.html" %}
    </tbody>
  </table>

  <h2 id="is"><code>is</code></h2>
  <p>A container for the <code>is.error</code> property.</p>
  <p>The following table describes the properties of the <code>is</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_is.html" %}
    </tbody>
  </table>

  <h2 id="loadbalancing"><code>loadbalancing</code></h2>
  <p>Provides information about the TargetEndpoint's load balancing status.</p>
  <p>The following table describes the properties of the <code>loadbalancing</code> variable:</p>
  <table>
    <thead>
       <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
   {% include "includes/flow-variables/_loadbalancing.html" %}
    </tbody>
  </table>

  <h2 id="message"><code>message</code></h2>
  <p>A contextual object, with the same value as {{request_object}} in the request flow
  or as {{response_object}} in the response flow or as {{error_object}} in the error
  flow.</p>
  <p>The following table describes the properties of the <code>message</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_message.html" %}
    </tbody>
  </table>

  <p>For more information on messages, see
  <a href="/api-platform/reference/message-template-intro">Message template function reference</a>.</p>

  <h2 id="messageid"><code>messageid</code></h2>
  <p>A container for the globally unique ID for the request.</p>
  <p>The following table describes the properties of the <code>messageid</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_messageid.html" %}
    </tbody>
  </table>

  <h2 id="organization"><code>organization</code></h2>
  <p>A container for the <code>organization.name</code> property.</p>
  <p>The following table describes the properties of the <code>organization</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_organization.html" %}
    </tbody>
  </table>

  <p>For more information on organizations, see
  <a href="/api-platform/fundamentals/apigee-edge-organization-structure">Understanding
  organizations</a>.</p>

  <h2 id="proxy"><code>proxy</code></h2>
  <p>The API proxy configuration.</p>
  <p>The following table describes the properties of the <code>proxy</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_proxy.html" %}
    </tbody>
  </table>

  <p>For more information on working with API proxies, see
  <a href="/api-platform/fundamentals/understanding-apis-and-api-proxies">Understanding APIs and
  API proxies</a>.</p>


  <h2 id="request"><code>request</code></h2>
  <p>The complete request, including any payload present.</p>
  <p>For more information about request data, see
  <a href="/api-platform/fundamentals/understanding-handling-request-response-data#howrequestdatapassedtothebackendserver">How is request data passed to the backend server?</a></p>
  <p>The following table describes the properties of the <code>request</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_request.html" %}
    </tbody>
  </table>

  <h2 id="response"><code>response</code></h2>
  <p>The complete response, including any payload present.</p>
  <p>The following table describes the properties of the <code>response</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_response.html" %}
    </tbody>
  </table>

  <h2 id="route"><code>route</code></h2>
  <p>Specifies the names of the {{routerule}} and TargetEndpoint.</p>
  <p>The following table describes the properties of the <code>route</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_route.html" %}
    </tbody>
  </table>

  <h2 id="router"><code>router</code></h2>
  <p>A container for the <code>router.uuid</code> property, which is deprecated.</p>
  <p>The following table describes the properties of the <code>router</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_router.html" %}
    </tbody>
  </table>

  <h2 id="servicecallout"><code>servicecallout</code></h2>
  <p>Describes the TargetEndpoint for a {{service_callout_policy}}.</p>
  <p>The following table describes the properties of the <code>servicecallout</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_servicecallout.html" %}
    </tbody>
  </table>

  <h2 id="system"><code>system</code></h2>
  <p>Specifies the IP address of the system, as well as details about the proxy.</p>
  <p>The following table describes the properties of the <code>system</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_system.html" %}
    </tbody>
  </table>

  <h2 id="target"><code>target</code></h2>
  <p>Describes the target of the request.</p>
  <p>The following table describes the properties of the <code>target</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_target.html" %}
    </tbody>
  </table>

  <h2 id="variable"><code>variable</code></h2>
  <p>A container for the <code>variable.expectedcn</code> property.</p>
  <p>The following table describes the properties of the <code>variable</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_variable.html" %}
    </tbody>
  </table>

  <p>For more information on working with TLS, see the
  <a href="/api-platform/system-administration/ssl">TLS/SSL introduction</a>.</p>

  <h2 id="virtualhost"><code>virtualhost</code></h2>
  <p>Specifies details about the virtual host.</p>
  <p>The following table describes the properties of the <code>virtualhost</code> variable:</p>
  <table>
    <thead>
      <tr>
        <th>Property</th>
        <th>Type</th>
        <th>Read/Write</th>
        <th>Description</th>
        <th>Scope&nbsp;begins</th>
      </tr>
    </thead>
    <tbody>
    {% include "includes/flow-variables/_virtualhost.html" %}
    </tbody>
  </table>

  <p>For more information on working with virtual hosts, see
  <a href="/api-platform/fundamentals/configuring-virtual-hosts">Configuring virtual hosts</a>.</p>


{% endblock %}
