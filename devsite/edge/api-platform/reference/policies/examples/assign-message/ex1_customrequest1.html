{% include "_localvars.html" %}

<p>The following example creates a custom request object with Assign Message:</p>

<pre class="prettyprint">{% includecode content_path="api-platform/reference/policies/examples/assign-message/custom-request-1.xml" %}</pre>

<p>This example:</p>
<ul>
  <li>Creates a new request message object called "MyCustomRequest".</li>
  <li>On MyCustomRequest, this policy:
    <ul>
      <li>Copies the value of the <code>user-agent</code> HTTP header from the incoming
        request to the new message. Because {{am_copy_link}} uses an absolute reference to the
        <code>user-agent</code> flow variable, there is no
        need to specify the <code>source</code> attribute to {{am_copy}}.</li>
      <li>Sets the <code>address</code> query parameter on the custom message to the value of
        the incoming request's <code>addy</code> query parameter.</li>
      <li>Sets the HTTP verb to <code>GET</code>.</li>
    </ul>
  </li>
  <li>Sets {{am_ignoreunresolvedvariables_link}} to "false". When {{am_ignoreunresolvedvariables}}
    is "false", if one of the variables the policy tries to add does not exist, Edge will stop
    processing in the API flow.</li>
</ul>
