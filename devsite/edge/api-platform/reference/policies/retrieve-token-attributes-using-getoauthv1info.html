  {% extends "_base.html" %} {% block title %}GetOAuthV1Info policy{% endblock %} {% block body %}

  <p><img src="/api-platform/images/icon_policy_security.jpg"></p>

  <h3>What</h3>

  <p>Gets attributes of tokens and keys and populates flow variables with the values of those
  attributes. This policy type can be useful when you need to configure dynamic, conditional
  behavior based on a value in a token or key. Whenever token validation occurs, variables are
  automatically populated with the values of token attributes. However, in cases where token
  validation has not occured, you can use this feature to explicity populate variables with these
  attribute values.  See also <a href=
  "/api-platform/reference/policies/oauth-10-policy.html">OAuth v1.0a policy</a>.</p>

  <h2 id="elementreference2">Element Reference</h2>

  <p>The element reference describes the elements and attributes of the GetOAuthV1Info policy.</p>
  <pre class="prettyprint">
&lt;GetOAuthV1Info async="false" continueOnError="false" enabled="true" name="Get-OAuth-v10a-Info-1"&gt;
    &lt;DisplayName&gt;Get OAuth v1.0a Info-1&lt;/DisplayName&gt;
    &lt;ConsumerKey ref="{flow.variable}"&gt;{value}&lt;/ConsumerKey&gt;
    &lt;RequestToken ref="{flow.variable}"&gt;{request token}&lt;/RequestToken&gt;
    &lt;AccessToken ref="{flow.variable}"&gt;{access token}&lt;/AccessToken&gt;
    &lt;OAuthConfig ref="{flow.variable}"&gt;{config}&lt;/OAuthConfig&gt;
&lt;/GetOAuthV1Info&gt;
</pre>

  <h2 id="getoauthv1infoattributes">&lt;GetOAuthV1Info&gt; attributes</h2>
  <pre class="prettyprint prettyprinted">
&lt;GetOAuthV1Info async="false" continueOnError="false" enabled="true" name="Get-OAuth-v10a-Info-1"&gt;
</pre>{% dynamic include /includes/___policies-parent-element-attributes %}

  <h2 id="accesstokenelement">&lt;AccessToken&gt; element</h2>

  <p>Verifies the access token and retrieves all the attributes. The resource has to be set in
  the flow in the variable <code>flow.resource.name</code>. On success, the attributes are
  available as flow variables.You pass in a either a variable that contains the access token string
  or a literal token string (rare case). In this example, the access token is retrieved from a
  query parameter passed in a request.</p>
  <pre class="prettyprint">
&lt;AccessToken ref="request.queryparam.access_token"&gt;&lt;/AccessToken&gt;
</pre>

  <table>
    <tbody>
      <tr>
        <td style="width: 120px;" width="150">
          <p><strong>Default:</strong></p>
        </td>

        <td width="223">
          <p><code>request.formparam.access_token</code> (<code>x-www-form-urlencoded</code> and
          specified in the request body)</p>
        </td>
      </tr>

      <tr>
        <td>
          <p><strong>Presence:</strong></p>
        </td>

        <td>
          <p>Optional</p>
        </td>
      </tr>

      <tr>
        <td><strong>Type:</strong></td>

        <td>String</td>
      </tr>

      <tr>
        <td><strong>Valid values:</strong></td>

        <td>
          <p>Either a flow variable containing an access token string, or a literal string.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <h2 id="consumerkeyelement">&lt;ConsumerKey&gt; element</h2>

  <p>Retrieves the profile for a consumer key. You pass in a either a variable that contains the
  access token string or a literal token string (rare case). In this example, the access token is
  retrieved from a query parameter passed in a request.</p>
  <pre class="prettyprint">
&lt;ConsumerKey ref="request.queryparam.consumer_key"&gt;&lt;/ConsumerKey&gt;
</pre>

  <table>
    <tbody>
      <tr>
        <td style="width: 120px;" width="150">
          <p><strong>Default:</strong></p>
        </td>

        <td width="223">
          <p><code>request.formparam.consumer_key</code> (<code>x-www-form-urlencoded</code> and
          specified in the request body)</p>
        </td>
      </tr>

      <tr>
        <td>
          <p><strong>Presence:</strong></p>
        </td>

        <td>
          <p>Optional</p>
        </td>
      </tr>

      <tr>
        <td><strong>Type:</strong></td>

        <td>String</td>
      </tr>

      <tr>
        <td><strong>Valid values:</strong></td>

        <td>
          <p>Either a flow variable containing an access token string, or a literal string.</p>
        </td>
      </tr>
    </tbody>
  </table>

  <h2 id="oauthconfigelement">&lt;OAuthConfig&gt; element</h2>

  <p>Verifies the OAuth config information.</p>
  <pre class="prettyprint">
&lt;OAuthConfig ref="request.queryparam.oauth_config"&gt;&lt;/OAuthConfig&gt;
</pre>

  <table>
    <tbody>
      <tr>
        <td style="width: 120px;" width="150">
          <p><strong>Default:</strong></p>
        </td>

        <td width="223">
          <p><code>request.formparam.access_token</code> (<code>x-www-form-urlencoded</code> and
          specified in the request body)</p>
        </td>
      </tr>

      <tr>
        <td>
          <p><strong>Presence:</strong></p>
        </td>

        <td>
          <p>Optional</p>
        </td>
      </tr>

      <tr>
        <td><strong>Type:</strong></td>

        <td>String</td>
      </tr>

      <tr>
        <td><strong>Valid values:</strong></td>

        <td>
          <p>Either a flow variable containing an access token string, or a literal string.</p>
        </td>
      </tr>
    </tbody>
  </table>

  

  <h2 id="requesttokenelement">&lt;RequestToken&gt; element</h2>

  <p>Retrieves the profile for an request token. You pass in a either a variable that contains the
  access token string or a literal token string (rare case). In this example, the access token is
  retrieved from a query parameter passed in a request.</p>
  <pre class="prettyprint">
&lt;RequestToken ref="request.queryparam.request_token"&gt;&lt;/RequestToken&gt;
</pre>

  <table>
    <tbody>
      <tr>
        <td style="width: 120px;" width="150">
          <p><strong>Default:</strong></p>
        </td>

        <td width="223">
          <p><code>request.formparam.request_token</code> (<code>x-www-form-urlencoded</code> and
          specified in the request body)</p>
        </td>
      </tr>

      <tr>
        <td>
          <p><strong>Presence:</strong></p>
        </td>

        <td>
          <p>Optional</p>
        </td>
      </tr>

      <tr>
        <td><strong>Type:</strong></td>

        <td>String</td>
      </tr>

      <tr>
        <td><strong>Valid values:</strong></td>

        <td>
          <p>Either a flow variable containing an access token string, or a literal string.</p>
        </td>
      </tr>
    </tbody>
  </table>

  

  <h2 id="flowvariables2"><a id="flowvariables2" name="flowvariables"></a>Flow variables</h2>

  <p>The GetOAuthV1Info policy populates these variables, and is typically used in cases where you
  need the profile data, but where a grant or validation has not occurred yet. .</p>

  <h3 id="flowvariables-consumerkeyvariables">Consumer Key variables</h3>

  <p>These variables are populated when the &lt;ConsumerKey&gt; operation executes:</p>
  <pre class="prettyprint">
oauthconsumer.{policy_name}.oauth_consumer_key
oauthconsumer.{policy_name}.oauth_consumer_key
oauthconsumer.{policy_name}.{app_attribute_name}
oauthconsumer.{policy_name}.{app_key_attribute_name}
</pre>

  <h3 id="flowvariables-accesstokenandrequesttokenvariables">Access token and request token
  variables</h3>

  <p>These variables are populated when the &lt;AccessToken&gt; or &lt;RequestToken&gt; operation
  executes:</p>
  <pre class="prettyprint">
oauth_token
oauth_token_secret
</pre>
  <pre class="prettyprint">
developer.app.name
developer.id
</pre>
  <pre class="prettyprint">
apiproduct.name
apiproduct.&lt;custom_attribute_name&gt;
</pre>

  <h2 id="policyspecificerrorcodes">Policy-specific error codes</h2>

  <p>See <a href="/api-platform/reference/policies/oauth-http-status-code-reference.html">OAuth
  HTTP error response reference</a>.</p>

  <h2 id="schema">Schema</h2>

  <p>Each policy type is defined by an XML schema (<code>.xsd</code>). For reference, <a href=
  "https://github.com/apigee/api-platform-samples/tree/master/schemas/policy">policy schemas</a>
  are available on GitHub.</p>

  <h2 id="errorcodes">Error codes</h2>

  <p>{% dynamic include /includes/___get-oauth-v10a-info-policy-error-codes %}</p>

  <h2 id="relatedtopics2">Related topics</h2>

  <ul>
    <li><a href="/api-platform/reference/policies/oauth-10-policy.html">OAuth v1.0a policy</a></li>
  </ul>

  {% endblock %}
