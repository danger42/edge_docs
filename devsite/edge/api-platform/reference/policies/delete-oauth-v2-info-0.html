  {% extends "_base.html" %} {% block title %}Delete OAuth V2 Info{% endblock %} {% block body %}
  <img src="/api-platform/images/icon_policy_security.jpg">  About | <a href=
  "#samples">Samples</a> | <a href="#elementreference">Element
  reference</a> | <a href="#flowvariables">Output</a> | <a href=
  "#schema">Schema</a>  | <a href="#relatedtopics">Related topics</a>

  <h3>What</h3>

  <p>Deletes the specified OAuth V2 authorization code or access token.</p>

  <h2 id="samples">Samples</h2><!-- Begin tab list -->
  <!-- End tab list --><!-- Begin tabbed region -->

  <div class="ds-selector-tabs">
    <section>
      <h3 class="two-line-tab">Delete Access Token</h3>

      <p>Below is an example policy used to delete an OAuth 2.0 access token. The example below
      locates the access token to delete on the request message by looking for a header called
      <code>access_token</code>.</p>
      <pre class="prettyprint">
&lt;DeleteOAuthV2Info name="DeleteAccessToken"&gt;
     &lt;AccessToken ref="request.header.access_token"&gt;&lt;/AccessToken&gt;
&lt;/DeleteOAuthV2Info&gt;
</pre>
    </section>
  </div><!-- End tab list --><!-- Begin tabbed region -->

  <div class="tab-content active">
    <!-- Tab 1 begin. -->

    <div class="tab-pane active" id="tab_2">
      <p>Below is an example policy used to delete an OAuth 2.0 authorization code. The example
      below locates the auth code to delete on the request message by looking for a query parameter
      called <code>code</code>.</p>
      <pre class="prettyprint">
&lt;DeleteOAuthV2Info name="DeleteAuthCode"&gt;
     &lt;AuthorizationCode ref="request.queryparam.code"&gt;&lt;/AuthorizationCode&gt;
&lt;/DeleteOAuthV2Info&gt;
</pre>
    </div><!-- Tab 1 end. --><!--Tab 2 begin. -->
  </div><!-- End tabbed region. -->
  <hr>

  <h2 id="elementreference">Element Reference</h2>

  <p>The element reference describes the elements and attributes of the DeleteOAuthV2Info
  policy.</p>
  <pre class="prettyprint">
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;DeleteOAuthV2Info async="false" continueOnError="false" enabled="true" name="DeleteOAuthV2Info-1"&gt;    
    &lt;DisplayName&gt;Delete OAuth v2.0 Info 1&lt;/DisplayName&gt;
    &lt;AccessToken ref={some-variable}&gt;&lt;/AccessToken&gt;
    &lt;!--&lt;AuthorizationCode ref={some-variable}&gt;&lt;/AuthorizationCode&gt;--&gt;
    &lt;Attributes/&gt;
&lt;/DeleteOAuthV2Info
</pre>

  <h2 id="deleteoauthv2infoattributes"><a id="JavaScript" name=
  "JavaScript"></a>&lt;DeleteOAuthV2Info&gt; attributes</h2>
  <pre class="prettyprint prettyprinted">
&lt;DeleteOAuthV2Info async="false" continueOnError="false" enabled="true" name="Delete-OAuth-v20-Info-1"&gt;
</pre>

  <table width="650">
    <thead>
      <tr>
        <th width="118">Attribute</th>

        <th width="343">Description</th>

        <th width="92">Default</th>

        <th width="192">Presence</th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>async</td>

        <td>
          <p>Set to <code>true</code> to specify that the policy should be run in a thread
          pool different than the pool servicing the request/response flow. Default
          is <code>false</code>.</p>

          <p>This setting is only used for for internal optimization.</p>
        </td>

        <td>false</td>

        <td>Optional</td>
      </tr>

      <tr>
        <td>continueOnError</td>

        <td>
          <p>Most policies are expected to return an error when a failure occurs. By setting this
          attribute to <code>true</code>, Flow execution continues on failure.</p>
        </td>

        <td>false</td>

        <td>Optional</td>
      </tr>

      <tr>
        <td>enabled</td>

        <td>Determines whether a policy is enforced or not. If set to <code>false</code>, a
        policy is 'turned off', and not enforced (even though the policy remains attached to a
        Flow).</td>

        <td>true</td>

        <td>Optional</td>
      </tr>

      <tr>
        <td>name</td>

        <td>
          <p>The internal name of the policy. This name is referenced in Step elements to attach
          the policy to a Flow.</p>

          <p><strong>Note:</strong> Characters you can use in the name are restricted to:
          <code>A-Z0-9._\-$ %</code>. The Management UI enforces additional restrictions, such as
          automatically removing characters that are not alphanumeric.</p>
        </td>

        <td>N/A</td>

        <td>Required</td>
      </tr>
    </tbody>
  </table>

  <h2 id="accesstokenelement">&lt;AccessToken&gt; element</h2>

  <p>Identifies the variable where the access token to delete is located. For example, if the
  access token is attached to request message as a query parameter called "access_token", specify
  <code>request.queryparam.access_token</code>. You can use any valid variable that references the
  token. Or, could pass in the literal token string (rare case).</p>
  <pre class="prettyprint">
 &lt;AccessToken ref="request.queryparam.access_token"&gt;&lt;/AccessToken&gt;
</pre>

  <table class="columns">
    <tbody>
      <tr>
        <td width="62"><b>Default:</b></td>

        <td width="275">N/A</td>
      </tr>

      <tr>
        <td><b>Presence:</b></td>

        <td>Either <code>&lt;AccessToken&gt;</code> or <code>&lt;AuthorizationCode&gt;</code> is
        required.</td>
      </tr>

      <tr>
        <td><b>Type:</b></td>

        <td>String</td>
      </tr>
    </tbody>
  </table>

  <h3 id="accesstokenelement-attributes">Attributes</h3>

  <table width="650">
    <tbody>
      <tr>
        <th scope="col">Attribute</th>

        <th scope="col">Description</th>

        <th scope="col">Default</th>

        <th scope="col">Presence</th>
      </tr>

      <tr>
        <td>ref</td>

        <td>
          <p>An access token variable. Typically, retrieved from a flow variable. For
          example: <code>request.header.token</code> or <code>request.queryparam.token</code>.</p>
        </td>

        <td>N/A</td>

        <td>Optional</td>
      </tr>
    </tbody>
  </table>

  <h2 id="authorizationcodeelement">&lt;AuthorizationCode&gt; element</h2>

  <p>Identifies the variable where the authorization code to delete is located. For example, if the
  auth code is attached to request message as a query parameter called "code", specify
  <code>request.queryparam.code</code>. You can use any valid variable that references the token.
  Or, could pass in the literal token string (rare case).</p>
  <pre class="prettyprint">
 &lt;AccessToken ref="request.queryparam.access_token"&gt;&lt;/AccessToken&gt;
</pre>

  <table class="columns">
    <tbody>
      <tr>
        <td width="112"><b>Default:</b></td>

        <td width="408">N/A</td>
      </tr>

      <tr>
        <td><b>Presence:</b></td>

        <td>Either <code>&lt;AccessToken&gt;</code> or <code>&lt;AuthorizationCode&gt;</code> is
        required.</td>
      </tr>

      <tr>
        <td><b>Type:</b></td>

        <td>String</td>
      </tr>
    </tbody>
  </table>

  <h3 id="authorizationcodeelement-attributes">Attributes</h3>

  <table width="650">
    <tbody>
      <tr>
        <th scope="col">Attribute</th>

        <th scope="col">Description</th>

        <th scope="col">Default</th>

        <th scope="col">Presence</th>
      </tr>

      <tr>
        <td>ref</td>

        <td>
          <p>An access token variable. Typically, retrieved from a flow variable. For
          example: <code>request.header.code</code> or <code>request.queryparam.code</code>.</p>
        </td>

        <td>N/A</td>

        <td>Optional</td>
      </tr>
    </tbody>
  </table>

  <h2 id="displaynameelement"><a id="DisplayName" name="DisplayName"></a>&lt;DisplayName&gt;
  element</h2>

  <p>A natural-language name that labels the policy in the management UI proxy editor. If omitted,
  the policy name attribute is used.</p>
  <pre class="prettyprint">
&lt;DisplayName&gt;DeleteOAuthV2Info 1&lt;/DisplayName&gt;
</pre>

  <table class="columns">
    <tbody>
      <tr>
        <td width="97"><b>Default:</b></td>

        <td width="366">The value of the policy's <code>name</code> attribute.</td>
      </tr>

      <tr>
        <td><b>Presence:</b></td>

        <td>Optional</td>
      </tr>

      <tr>
        <td><b>Type:</b></td>

        <td>String</td>
      </tr>
    </tbody>
  </table>

  <h2 id="flowvariables">Output</h2>

  <p>On success, the policy returns a 200 status.</p>

  <p>On failure, the policy returns 404 and output similar to the following (depending on whether
  you are deleting an access token or an auth code):</p>
  <pre class="prettyprint">
HTTP/1.1 404 Not Found
Content-Type: application/json
Content-Length: 144
Connection: keep-alive

{"fault":{"faultstring":"Invalid Authorization Code","detail":{"errorcode":"keymanagement.service.invalid_request-authorization_code_invalid"}}}
</pre>

  <h2 id="schema">Schema</h2>

  <p>Each policy type is defined by an XML schema (<code>.xsd</code>). For reference, <a href=
  "https://github.com/apigee/api-platform-samples/tree/master/schemas/policy">policy schemas</a>
  are available on GitHub.</p>

  <h2 id="relatedtopics">Related topics</h2>

  <ul>
    <li><a href="/api-platform/reference/policies/oauthv2-policy.html">OAuthV2 policy</a></li>

    <li><a href="/api-platform/security/oauth/oauth-home.html">OAuth home</a></li>

    <li><a href="/api-platform/security/oauth/customizing-access-tokens.html">Customizing Tokens
    and Authorization Codes</a></li>
  </ul>{% endblock %}
